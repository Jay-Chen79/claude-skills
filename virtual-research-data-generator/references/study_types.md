# 研究类型详细指南

本文档提供各类研究设计的详细数据生成指南。

---

## 随机对照试验 (RCT)

### 特点
- 随机分组确保基线可比性
- 干预与结局的因果关系最强

### 数据生成要点

#### 基线变量
- **组间平衡**：所有基线变量在组间应无统计学差异（p > 0.05）
- **分布要求**：两组的均值/比例应非常接近
- **随机化模拟**：先生成全体数据，再随机分配组别

#### 结局变量
- **效应体现**：组间差异主要在结局变量
- **ITT结构**：保留所有随机分组的对象，包括脱落者
- **脱落模式**：脱落可与组别相关，但不应过度失衡

#### CONSORT数字
```
评估资格 (n=...)
    ├── 排除 (n=...)
    │   ├── 不符合纳入标准 (n=...)
    │   └── 拒绝参加 (n=...)
    └── 随机化 (n=...)
        ├── 分配到干预组 (n=...)
        │   ├── 接受干预 (n=...)
        │   └── 未接受干预 (n=...)
        └── 分配到对照组 (n=...)
            ├── 接受对照 (n=...)
            └── 未接受对照 (n=...)
```

### 参数设置示例

| 参数 | 典型值 |
|-----|-------|
| 基线变量组间p值 | > 0.2 |
| 主要结局效应量 | 视干预而定 |
| 脱落率 | 5-20% |
| 方案违背率 | 2-10% |

---

## 队列研究

### 特点
- 观察性研究，暴露非随机分配
- 可分为前瞻性和回顾性

### 数据生成要点

#### 暴露变量
- **组间差异**：暴露组和非暴露组可存在基线差异
- **混杂控制**：需生成与暴露和结局都相关的变量

#### 随访与失访
- **随访时间**：需生成每个对象的随访时间
- **失访模式**：
  - 随机失访：与暴露、结局无关
  - 信息性失访：与暴露或结局相关

#### 时间依赖变量
- 暴露可随时间变化
- 需生成多时点数据

### 效应指标

| 指标 | 计算方法 |
|-----|---------|
| 风险比 (RR) | 暴露组发病率 / 非暴露组发病率 |
| 风险差 (RD) | 暴露组发病率 - 非暴露组发病率 |
| 风险比 (HR) | Cox回归估计 |

---

## 病例对照研究

### 特点
- 从结局出发，回溯暴露
- 效率高，适合罕见疾病

### 数据生成要点

#### 逆向设计
1. 先确定病例和对照的数量
2. 根据预期OR，计算各组的暴露比例
3. 生成符合比例的暴露数据

#### OR计算
```
OR = (病例中暴露 × 对照中非暴露) / (病例中非暴露 × 对照中暴露)
```

给定：
- 病例中暴露比例 = p1
- 对照中暴露比例 = p0
- OR = [p1/(1-p1)] / [p0/(1-p0)]

#### 匹配设计
- 1:1匹配：每个病例匹配一个对照
- 1:n匹配：每个病例匹配n个对照
- 匹配变量不应为研究因素

### 参数设置

| 设计 | 病例:对照 | 统计方法 |
|-----|----------|---------|
| 非匹配 | 1:1到1:4 | 非条件Logistic回归 |
| 匹配 | 1:1到1:4 | 条件Logistic回归 |

---

## 横断面研究

### 特点
- 同一时点测量暴露和结局
- 无法确定时序

### 数据生成要点

- **同时点测量**：所有变量反映同一时刻状态
- **患病率控制**：结局的比例应符合预期患病率
- **暴露流行率**：暴露的比例应符合人群特征

### 效应指标
- 患病率比 (PR)
- 患病率比值比 (POR)

---

## 诊断准确性研究

### 特点
- 评估诊断/筛查测试的性能
- 需要金标准

### 数据生成要点

#### 金标准
- 疾病真实状态（0/1）
- 疾病阳性率应符合预期

#### 待评估测试
- **连续型**：如生物标志物浓度
  - 阳性组均值 > 阴性组均值
  - 分布可重叠
  
- **分类型**：如阳性/阴性/临界

#### 性能指标控制

| 指标 | 计算 | 生成策略 |
|-----|------|---------|
| 敏感度 (Se) | TP / (TP+FN) | 控制阳性组的测试分布 |
| 特异度 (Sp) | TN / (TN+FP) | 控制阴性组的测试分布 |
| AUC | ROC曲线下面积 | 控制两组分布的分离度 |

#### AUC与分布参数

假设两组均为正态分布：
- 阴性组：N(μ0, σ)
- 阳性组：N(μ1, σ)
- d' = (μ1 - μ0) / σ
- AUC ≈ Φ(d' / √2)

要达到AUC=0.80：
- d' ≈ 1.19
- 即均值差约1.2个标准差

---

## 生存分析研究

### 特点
- 结局为事件发生时间
- 存在删失数据

### 数据生成要点

#### 事件时间
- **指数分布**：恒定风险
- **Weibull分布**：可变风险
  - shape > 1：风险递增
  - shape < 1：风险递减
  - shape = 1：指数分布

#### 删失
- **行政删失**：研究结束时未发生事件
- **随机删失**：随访期间失访
- **竞争风险**：因其他原因无法观察到事件

#### HR控制

对于指数分布：
- 中位生存时间 = ln(2) / λ
- HR = λ1 / λ0 = median0 / median1

### 生存曲线形态

| HR | 曲线特征 |
|---|---------|
| HR = 1 | 两组重叠 |
| HR > 1 | 暴露组曲线下降更快 |
| HR < 1 | 暴露组曲线下降更慢 |

---

## 相关/回归分析

### 特点
- 研究变量间关联
- 可有一个或多个自变量

### 数据生成要点

#### 相关系数控制
使用Cholesky分解生成相关数据：
1. 构建目标相关矩阵
2. 进行Cholesky分解
3. 生成独立正态变量
4. 矩阵变换得到相关变量

#### 回归系数控制
使用条件生成：
```
Y = β0 + β1*X1 + β2*X2 + ... + ε
```

其中ε ~ N(0, σ²)，σ控制R²

#### 多重共线性
- VIF > 10表示严重共线性
- 可通过控制自变量间相关性调整

### 效应量参考

| r值 | 解释 |
|----|-----|
| 0.1 | 小效应 |
| 0.3 | 中效应 |
| 0.5 | 大效应 |

| R² | 解释 |
|----|-----|
| 0.02 | 小效应 |
| 0.13 | 中效应 |
| 0.26 | 大效应 |
